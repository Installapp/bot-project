# راهنمای سیستم تیکت

## 📋 مشخصات سیستم

سیستم تیکت کاملی که شامل قابلیت‌های زیر است:

### 🎯 ویژگی‌ها
- ایجاد تیکت با دکمه کلیک
- انتقال خودکار تیکت‌ها بین کتگوری‌های باز و بسته
- سیستم ترنسکریپت و ارسال به DM
- دسترسی‌های مخصوص برای رول‌های مشخص
- پنل مدیریت تیکت

### 🏷️ تنظیمات اصلی

```javascript
// آی‌دی‌های مهم در فایل ticket.js
TICKET_CONFIG = {
    openCategoryId: '',    // کتگوری تیکت‌های باز
    closeCategoryId: '',   // کتگوری تیکت‌های بسته
    transcriptChannelId: '', // چنل ارسال ترنسکریپت
    allowedRoles: [                          // رول‌هایی که می‌توانند تیکت را ببینند
        '',
        ''
    ]
}
```

## 🚀 نحوه استفاده

### 1. ایجاد پنل تیکت
```
/ticket-panel
```
این دستور یک پنل زیبا با دکمه ایجاد تیکت در چنل فعلی می‌سازد.

### 2. مشاهده آمار تیکت‌ها
```
/ticket-stats
```
نمایش تعداد تیکت‌های فعال، بسته و کل تیکت‌ها.

### 3. فرآیند کار تیکت

1. **ایجاد تیکت**: کاربر روی دکمه "ایجاد تیکت" کلیک می‌کند
2. **تیکت جدید**: چنل جدید با دسترسی‌های مناسب ایجاد می‌شود
3. **بستن تیکت**: فقط ادمین‌ها می‌توانند تیکت را ببندند
4. **باز کردن مجدد**: امکان باز کردن مجدد تیکت‌های بسته شده
5. **حذف تیکت**: حذف نهایی تیکت بسته شده
6. **ترنسکریپت**: فایل ترنسکریپت هنگام حذف تیکت به چنل ارسال می‌شود

## 🔐 دسترسی‌ها

### کاربر عادی
- می‌تواند تیکت ایجاد کند
- فقط یک تیکت فعال در هر زمان
- دسترسی کامل به تیکت خودش
- **نمی‌تواند** تیکت را ببندد

### رول‌های مجاز (``, ``)
- مشاهده و نوشتن در همه تیکت‌ها
- **می‌توانند** تیکت را ببندند
- **نمی‌توانند** تیکت را حذف کنند
- **نمی‌توانند** تیکت بسته را مجدداً باز کنند

### ادمین (Administrator Permission)
- دسترسی کامل به همه قابلیت‌ها
- بستن و باز کردن مجدد تیکت‌ها
- حذف تیکت‌های بسته شده
- ایجاد پنل تیکت
- مشاهده آمار

## 📁 ساختار فایل‌ها

```
├── bot.js          # فایل اصلی بات
├── ticket.js       # سیستم تیکت کامل
├── config.js       # تنظیمات عمومی
└── commands.js     # سایر دستورات
```

## 🎫 ویژگی‌های خاص

### ترنسکریپت خودکار
- هنگام حذف تیکت، کل مکالمات ذخیره می‌شود
- فایل ترنسکریپت به چنل `` ارسال می‌شود
- شامل اطلاعات کامل: زمان، کاربر، پیام‌ها، فایل‌های ضمیمه

### مدیریت دسترسی‌ها
- هر تیکت دسترسی‌های مخصوص به خود دارد
- رول‌های مجاز فقط می‌توانند مشاهده و چت کنند
- عدم تداخل با مدیریت چنل

### شمارش خودکار
- هر تیکت شماره منحصربفرد دارد
- نام‌گذاری استاندارد: `ticket-0001-username`
- پیگیری آسان تیکت‌ها

## ⚠️ نکات مهم

1. **فقط یک تیکت فعال**: هر کاربر فقط می‌تواند یک تیکت فعال داشته باشد
2. **کتگوری‌های صحیح**: مطمئن شوید کتگوری‌های مشخص شده وجود دارند
3. **دسترسی بات**: بات باید دسترسی مدیریت چنل در کتگوری‌ها داشته باشد
4. **رول‌های مجاز**: رول‌های مشخص شده باید در سرور موجود باشند

## 🔧 عیب‌یابی

اگر سیستم کار نمی‌کند:
1. بررسی کنید کتگوری‌ها وجود دارند
2. دسترسی‌های بات را چک کنید
3. آی‌دی‌های رول‌ها را تأیید کنید
4. لاگ‌های کنسول را بررسی کنید

---

